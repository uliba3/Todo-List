(()=>{"use strict";class t{constructor(t,e){this.content=t,this.dueDate=e,this.completed=!1}toggleCompleted(){this.completed=!this.completed}editContent(t){this.content=t}editDueDate(t){this.dueDate=t}}const e={todos:[],addTodo(e,o){const d=new t(e,o);return this.todos.push(d),console.log(d),d},deleteTodo(t){t>=0&&t<this.todos.length&&this.todos.splice(t,1)},moveUpTodo(t){if(t>0&&t<this.todos.length){const e=this.todos[t];this.todos[t]=this.todos[t-1],this.todos[t-1]=e}},moveDownTodo(t){if(t>=0&&t<this.todos.length-1){const e=this.todos[t];this.todos[t]=this.todos[t+1],this.todos[t+1]=e}},saveToLocalStorage(){localStorage.setItem("todos",JSON.stringify(this.todos))},loadFromLocalStorage(){const t=localStorage.getItem("todos");t&&(this.todos=JSON.parse(t))}},o=document.getElementById("todo-list");function d(){o.innerHTML="",e.todos.forEach(((t,n)=>{const s=document.createElement("div"),a=document.createElement("input"),l=document.createElement("div"),c=document.createElement("div"),i=document.createElement("button"),r=document.createElement("button"),m=document.createElement("button");if(a.type="checkbox",a.checked=t.completed,a.addEventListener("change",(()=>{t.toggleCompleted(),d()})),l.textContent=t.content,null===t.dueDate);else{const e=`${t.dueDate.getFullYear()}/${String(t.dueDate.getMonth()+1).padStart(2,"0")}/${String(t.dueDate.getDate()).padStart(2,"0")}`;c.textContent=e}i.textContent="Delete",r.textContent="↑",m.textContent="↓",i.addEventListener("click",(()=>{e.deleteTodo(n),e.saveToLocalStorage(),d()})),r.addEventListener("click",(()=>{e.moveUpTodo(n),e.saveToLocalStorage(),d()})),m.addEventListener("click",(()=>{e.moveDownTodo(n),e.saveToLocalStorage(),d()})),s.appendChild(a),s.appendChild(c),s.appendChild(l),s.appendChild(i),s.appendChild(r),s.appendChild(m),o.appendChild(s)}))}document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("todo-form"),o=document.getElementById("todo-content"),n=document.getElementById("due-date");t.addEventListener("submit",(t=>{t.preventDefault();const s=o.value,a=n.value,l=a?new Date(a):null;e.addTodo(s,l),e.saveToLocalStorage(),d(),o.value="",n.value=""})),e.loadFromLocalStorage(),d()}))})();